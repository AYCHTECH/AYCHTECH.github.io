---
layout: post
title: 7월 Atlassian TroubleShooting 정리
description: "TroubleShooting 경험을 공유합니다." 
author: wjsrkqdlf
date: 2018-08-07
tags: [atlassian, TroubleShooting]
category: atlassian
---
<h2 id="id-7월AtlassianTroubleShooting정리-7월이슈사항내역">
 7월 이슈사항 내역
</h2>
<h3 id="id-7월AtlassianTroubleShooting정리-일반사용자가Header의Issues메뉴(Currentsearch,Searchforissues)사용시Layout이깨지며,Browser가hang되는현상">
 <strong>
  일반 사용자가 Header의 Issues 메뉴(Current search, Search for issues) 사용 시 Layout이 깨지며, Browser가 hang되는 현상
 </strong>
</h3>
<ul>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    Exception :Uncaught ReferenceError :Calendar is not defined
   </li>
   <li>
    사용하지 않는 Jira Suit Utilities plugin이 설치되어 있었으며, 해당 Add-on을 제거함으로써 해결
   </li>
  </ul>
 </li>
</ul>
<h3 id="id-7월AtlassianTroubleShooting정리-Project생성시에러발생현상">
 <strong>
  Project 생성 시 에러발생현상
 </strong>
</h3>
<ol>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    Caused by: java.lang.RuntimeException: Could not identify Bundle at location &lt;reference:
    <a class="external-link" href="http://file/var/atlassian/application-data/jira/plugins/.osgi-plugins/transformed-plugins/project-templates-plugin-6.2.3_1531264928000.jar" rel="nofollow">
     file:/var/atlassian/application-data/jira/plugins/.osgi-plugins/transformed-plugins/project-templates-plugin-6.2.3_1531264928000.jar
    </a>
    &gt;
   </li>
   <li>
    Cache된 플러그인 디렉토리가 삭제되어 발생하는 에러로, Jira 재시작 시 해결
   </li>
  </ul>
 </li>
</ol>
<h3 id="id-7월AtlassianTroubleShooting정리-JiraKanbanBoard에서이슈클릭시에러발생현상">
 <strong>
  Jira Kanban Board에서 이슈 클릭 시 에러발생현상
 </strong>
</h3>
<ol>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    An ssh error occurred while querying for reviews
   </li>
   <li>
    사용하지 않는 Gerrit plugin이 설치되어 있었으며, 해당 Add-on을 제거함으로써 해결
   </li>
  </ul>
 </li>
</ol>
<h3 id="id-7월AtlassianTroubleShooting정리-UserpickercustomField문제">
 <strong>
  User picker custom Field 문제
 </strong>
</h3>
<ol>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    사용자가 1000명 이상인 그룹에 대해 Jira의 Custom field 중 하나인 user picker를 사용 시 해당 그룹의 최대 사용자가 1000명까지밖에 조회되지않는 현상
   </li>
   <li>
    이는 Third-party Add-on인 Custom watcher field에서도 동일하게 발생
   </li>
   <li>
    현재 Bug로 등록 및 에스컬레이션 진행 중이나, Fix되지 않음
    <ul>
     <li>
      <a class="external-link" href="https://jira.atlassian.com/browse/JRASERVER-63771" rel="nofollow">
       https://jira.atlassian.com/browse/JRASERVER-63771
      </a>
     </li>
    </ul>
   </li>
   <li>
    Atlassian Bug Fix 정책에 따라, hotfix가 불가능
   </li>
  </ul>
 </li>
</ol>
<h3 id="id-7월AtlassianTroubleShooting정리-JiraFileupload문제">
 <strong>
  Jira File upload 문제
 </strong>
</h3>
<ol>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    Jira의 자체적인 파일업로드 사이즈 제한을 풀었음에도 파일 업로드가 되지 않는 현상
   </li>
   <li>
    Nginx 웹서버 설정의 max_body size 를 늘림으로써 해결
   </li>
  </ul>
 </li>
</ol>
<h3 id="id-7월AtlassianTroubleShooting정리-ConfluenceTable자음분리문제">
 <strong>
  Confluence Table 자음 분리 문제
 </strong>
</h3>
<ol>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    Confluence Table에서 첫 Column에서 한글의 자음이 분리되는 현상
   </li>
   <li>
    Chrome의 버그로 최신업데이트로 해결
   </li>
  </ul>
 </li>
</ol>
<h3 id="id-7월AtlassianTroubleShooting정리-JiraServiceDesk에서ConfluenceKnowledgeBase연동시Anonymous권한이있어야만하는현상">
 <strong>
  Jira Service Desk에서 Confluence KnowledgeBase 연동 시 Anonymous 권한이 있어야만하는 현상
 </strong>
</h3>
<ul>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    Jira의 Application link 버그로, 연결방식을 OAuth (impersonation)로 변경 시 해결
   </li>
  </ul>
 </li>
</ul>
<h3 id="id-7월AtlassianTroubleShooting정리-SSRF버그를통한취약점문제">
 <strong>
  SSRF 버그를 통한 취약점 문제
 </strong>
</h3>
<ol>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    <a class="external-link" href="https://www.zdnet.com/article/jira-bug-exposed-private-server-keys-at-major-companies-researcher-finds/" rel="nofollow">
     https://www.zdnet.com/article/jira-bug-exposed-private-server-keys-at-major-companies-researcher-finds/
    </a>
   </li>
   <li>
    <a class="external-link" href="https://www.trendmicro.com/vinfo/us/security/news/vulnerabilities-and-exploits/jira-bug-exposes-organizations-aws-server-keys" rel="nofollow">
     https://www.trendmicro.com/vinfo/us/security/news/vulnerabilities-and-exploits/jira-bug-exposes-organizations-aws-server-keys
    </a>
   </li>
   <li>
    Jira / Confluence 각각 해당 취약점이 해결된 버전으로 업그레이드하여 해결
   </li>
  </ul>
 </li>
</ol>
<h3 id="id-7월AtlassianTroubleShooting정리-Log에사용자ID가남지않는문제">
 <strong>
  Log에 사용자 ID가 남지않는 문제
 </strong>
</h3>
<ul>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    <p>
     192.168.1.120 - -
     <span class="error">
      [12/Jul/2018:14:53:16 +0900]
     </span>
     0.366s - 7423 /wiki/attachmentnotfound.action?pageId=159876496
    </p>
   </li>
   <li>
    <p>
     server.xml파일에 %{X-AUSERNAME}o 파라메터 추가
     <br/>
     <a class="external-link" href="https://confluence.atlassian.com/confkb/audit-confluence-using-the-tomcat-valve-component-223216846.html" rel="nofollow" title="Follow link">
      https://confluence.atlassian.com/confkb/audit-confluence-using-the-tomcat-valve-component-223216846.html
     </a>
    </p>
    <p>
     <span class="error">
      [12/Jul/2018:15:04:19 +0900]
     </span>
     testuser Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36 192.168.1.120 0.042s - 672 /wiki/rest/webResources/1.0/resources
    </p>
   </li>
  </ul>
 </li>
</ul>
<h2 id="id-7월AtlassianTroubleShooting정리-ETC">
 ETC
</h2>
<h3 id="id-7월AtlassianTroubleShooting정리-CrowdDataCenterMechanism관련">
 Crowd Data Center Mechanism 관련
</h3>
<ul>
 <li style="list-style-type: none;background-image: none;">
  <ul>
   <li>
    Jira의 경우 ehcache를, Confluence의 경우 hazelcast를 Clustering에 사용하나 Crowd에 대한 정보를 찾기가 어려워 Support에 질의
   </li>
   <li>
    Crowd의 경우 Jira나 Confluence만큼 복잡한 솔루션이 아니기에 DB Table 레벨에서 해결
    <ul>
     <li>
      <p>
       Crowd doesn't use any mechanisms like Hazelcast or ehcache to manage the cluster. It maintains the state of the cluster through tables in the database.
       <br/>
       Basically, Crowd is a
       <em>
        simpler
       </em>
       application than Confluence or Jira and doesn't have any need to implement any additional clustering mechanism
       <br/>
       I also got the following information from one of our Crowd developers.
      </p>
      <blockquote>
       <p>
        Crowd is not using cache replication among DC nodes.
        <br/>
        It relies on DB and there is publish - subscribe mechanism also based on DB to notify all nodes about changes in config
       </p>
      </blockquote>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p>
 <br/>
</p>